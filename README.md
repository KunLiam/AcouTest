# 声测大师(AcouTest)

## 项目概述

声测大师(AcouTest)是一个专为音频系统测试设计的综合工具，支持多种音频测试功能，包括麦克风测试、多声道测试、扫频测试、HAL录音和日志监控等。该工具可帮助音频工程师和质量测试人员进行音频设备的测试、调试和问题排查。

## 主要功能

### 1. 麦克风测试
- 支持多麦克风录音测试
- 可设置PCM设备号、设备ID、采样率等参数
- 实时显示录音状态
- 自动保存录音文件

### 2. Loopback和Ref测试
- 支持回路测试和参考通道测试
- 可选择设备、通道数和采样率
- 支持自定义测试音频或使用默认测试音频
- 实时显示测试状态

### 3. 多声道测试
- 支持7.1声道音频播放测试
- 可设置采样率和位深
- 适用于多声道音频系统测试

### 4. 本地播放
- 支持播放本地音频文件
- 支持将音频推送到设备播放
- 支持音量调节
- 支持多种音频格式

### 5. 扫频测试
- 支持单次扫频测试和批量扫频测试
- 支持自定义扫频音频文件
- 可设置录音设备、通道数、采样率等参数
- 自动保存测试结果

### 6. HAL录音
- 支持多种HAL录音属性设置
- 可自定义录音目录
- 支持自动停止录音
- 可批量拉取录音文件

### 7. 自定义HAL录音
- 支持添加自定义录音属性
- 可自定义录音目录和保存路径
- 支持自动停止录音
- 可批量拉取录音文件

### 8. 屏幕截图
- 支持设备屏幕截图
- 可自定义保存路径
- 自动生成时间戳文件名

### 9. 喇叭测试
- 支持喇叭测试音频播放
- 支持默认测试音频或自定义音频

### 10. 日志监控
- 支持开启/关闭日志打印
- 支持日志抓取
- 可设置日志过滤条件
- 可自定义保存路径
- 日志过滤器用于控制抓取的日志内容，语法为`TAG:PRIORITY`：
  - TAG：日志标签，如AudioFlinger、AudioPolicyManager等
  - PRIORITY：日志优先级，从低到高依次为V(详细)、D(调试)、I(信息)、W(警告)、E(错误)、F(严重)、S(静默)

  示例：
  - `*:V` - 显示所有日志（默认）
  - `AudioFlinger:V AudioPolicyManager:V` - 只显示音频相关组件的日志
  - `*:W` - 只显示警告及以上级别的日志
  - `audio*:V *:S` - 只显示以"audio"开头的标签的日志

### 11. 遥控器管理
- 支持遥控器配对和管理
- 使用`adb shell am broadcast -a com.nes.intent.action.NES_RESET_LONGPRESS`指令进行配对
- 支持发送遥控器按键命令
- 可移除已配对的遥控器

### 12. 雷达检查功能
- 支持Radar日志监控
- 可检查TTY设备

## 使用方法

### 设备连接
1. 通过USB连接Android设备
2. 点击"刷新设备列表"按钮
3. 从下拉列表选择要测试的设备
4. 设备连接状态会在界面上显示

### 麦克风测试
1. 选择"麦克风测试"选项卡
2. 设置麦克风数量、PCM设备号、设备ID和采样率
3. 点击"开始录音"按钮开始测试
4. 点击"停止录音"按钮结束测试，录音文件会自动保存

### Loopback和Ref测试
1. 选择"Loopback和Ref测试"选项卡
2. 设置设备号、通道数和采样率
3. 选择使用默认测试音频或自定义音频
4. 点击"开始测试"按钮开始测试
5. 点击"停止测试"按钮结束测试，录音文件会自动保存

### 扫频测试
1. 选择"扫频测试"选项卡
2. 选择扫频文件类型和文件
3. 设置录音设备、通道数、采样率等参数
4. 点击"开始测试"按钮开始单次测试，或点击"开始批量测试"进行批量测试
5. 测试完成后，结果会自动保存到指定目录

### HAL录音
1. 选择"HAL录音"选项卡
2. 选择需要启用的录音属性
3. 设置录音目录和保存路径
4. 点击"开始录音"按钮开始录音
5. 点击"停止录音"按钮结束录音，录音文件会自动保存

### 日志监控
1. 选择"日志监控"选项卡
2. 选择需要启用的日志属性
3. 点击"放开日志打印"按钮开启日志
4. 点击"开始抓取日志"按钮开始抓取日志
5. 点击"停止抓取日志"按钮结束抓取，日志文件会自动保存

## 技术要求

- 操作系统：Windows 7/10/11
- Python 3.6 或更高版本
- 依赖库：tkinter, pygame, subprocess, threading
- ADB工具（Android Debug Bridge）

## 安装方法

1. 安装Python 3.6或更高版本
2. 安装必要的依赖库：
   ```
   pip install pygame
   ```
3. 确保ADB工具已安装并添加到系统PATH
4. 下载本工具的源代码
5. 运行main.py启动工具

## 常见问题

### 设备连接问题
- 确保USB调试已开启
- 尝试重新连接设备
- 检查ADB驱动是否正确安装

### 录音问题
- 确保设备麦克风未被其他应用占用
- 检查录音参数设置是否正确
- 尝试使用不同的PCM设备号

### 播放问题
- 确保音频文件格式正确
- 检查设备扬声器是否正常工作
- 尝试使用不同的播放方式

## 联系与支持

如有问题或建议，请联系开发团队。

---

© 2025 声测大师(AcouTest) 保留所有权利 